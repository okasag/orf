set.seed(1)
# number of observations
n  <- 200
# various covariates
X1 <- rnorm(n, 1, 1) # continuous
X2 <- rpois(n, 1) # categorical
X3 <- rbinom(n, 1, 0.5) # dummy
X4 <- rnorm(n, 0, 1) # noise
# bind into matrix
X <- as.matrix(cbind(X1, X2, X3, X4))
# some nonlinear DGP
Y  <- 2*(X1)^2 + exp(X2) + 10*(X3) + rlogis(n, 0, 1)
# discretize outcome into ordered classes 1, 2, 3
Y  <- as.numeric(cut(Y, breaks = quantile(Y, c(0, 0.25, 0.75, 1)), include.lowest = TRUE))
# load orf package
library(orf)
# estimate orf (main functionality)
orf_fit <- orf(X, Y)
# print orf fit
print(orf_fit)
# summary of orf fit
summary(orf_fit)
# plot orf fit
plot(orf_fit)
# libraries
library(orf)
library(psych)
library(MASS)
library(erer)
# set seed for replicability
set.seed(1)
# number of observations
n  <- 200
# various covariates
X1 <- rnorm(n, 1, 1) # continuous
X2 <- rbinom(n, 5, 0.5)
#X2 <- rpois(n, 1) # categorical
X3 <- rbinom(n, 1, 0.5) # dummy
X4 <- rnorm(n, 0, 1) # noise
# bind into matrix
X <- as.matrix(cbind(X1, X2, X3, X4))
# generate some data
# coefficients
betas <- c(1, 1, 1, 0)
# deterministic component
deterministic <- 1*(X1) + 1*(X2) + 1*(X3)
# generate outcome with logistic error
Y  <- deterministic + rlogis(n, 0, 1)
# thresholds for continuous outcome
cuts <- quantile(Y, c(0, 0.25, 0.75, 1))
# discretize outcome into ordered classes 1, 2, 3
Y  <- as.numeric(cut(Y, breaks = cuts, include.lowest = TRUE))
# compute the true probabilities
real_prob                       <- cbind(logistic(cuts[2] - deterministic) - 0,
logistic(cuts[3] - deterministic) - logistic(cuts[2]-deterministic),
1 - logistic(cuts[3]-deterministic))
# column names
colnames(real_prob) <- c("Class 1", "Class 2", "Class 3")
# 1. estimate ordered forest
orf_fit <- orf(X,Y)
# predict ordered probabilities
orf_pred <- predict(orf_fit)$forestPredictions
# compute MSE (in-sample)
orf_mse <- mean((rowSums((real_prob - orf_pred)^2)/3))
# 2. estimate ordered logit
ologit_fit <- polr(as.factor(Y) ~ .,  data = as.data.frame(cbind(Y,X)))
# predict ordered probabilities
ologit_pred <- predict(ologit_fit, type = "probs")
# compute MSE (in-sample)
ologit_mse <- mean((rowSums((real_prob - ologit_pred)^2)/3))
orf_mse
ologit_mse
# compute true marginal effects
# X1 continuous (marginal change)
real_me_x1 <- cbind((0                                               - dlogis(cuts[2] - cbind(X1, X2, X3, X4)%*%betas))*betas[1],
(dlogis(cuts[2] - cbind(X1, X2, X3, X4)%*%betas) - dlogis(cuts[3] - cbind(X1, X2, X3, X4)%*%betas))*betas[1],
(dlogis(cuts[3] - cbind(X1, X2, X3, X4)%*%betas) -                                               0)*betas[1])
# take the mean
real_me_x1 <- colMeans(real_me_x1)
# X2 categorical (discrete change)
real_me_x2 <- (cbind(logistic(cuts[2] - cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas) - logistic(cuts[2]-cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas))
-
cbind(logistic(cuts[2] - cbind(X1, floor(mean(X2)), X3, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, floor(mean(X2)), X3, X4)%*%betas) - logistic(cuts[2]-cbind(X1, floor(mean(X2)), X3, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, floor(mean(X2)), X3, X4)%*%betas)))
# take the mean
real_me_x2 <- colMeans(real_me_x2)
# X3 binary (discrete change)
real_me_x3 <- (cbind(logistic(cuts[2] - cbind(X1, X2, 1, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, X2, 1, X4)%*%betas) - logistic(cuts[2]-cbind(X1, X2, 1, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, X2, 1, X4)%*%betas))
-
cbind(logistic(cuts[2] - cbind(X1, X2, 0, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, X2, 0, X4)%*%betas) - logistic(cuts[2]-cbind(X1, X2, 0, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, X2, 0, X4)%*%betas)))
# take the mean
real_me_x3 <- colMeans(real_me_x3)
# combine everything together
real_me <- rbind(real_me_x1, real_me_x2, real_me_x3, rep(0,3))
colnames(real_me) <- c("Class 1", "Class 2", "Class 3")
rownames(real_me) <- c("X1", "X2", "X3", "X4")
# 1. estimate orf marginal effects
orf_me <- margins(orf_fit)
# 2. estimate ologit marginal effects
ologit_me <- ocME(ologit_fit)$out
# compare the three
round(real_me, 3)
round(orf_me$MarginalEffects, 3)
ologit_me$ME.all
# compute the real probabilities and real marginal effects for the example data
# libraries
library(orf)
library(psych)
library(MASS)
library(erer)
# set seed for replicability
set.seed(1)
# number of observations
n  <- 500
# various covariates
X1 <- rnorm(n, 1, 1) # continuous
X2 <- rbinom(n, 5, 0.5)
#X2 <- rpois(n, 1) # categorical
X3 <- rbinom(n, 1, 0.5) # dummy
X4 <- rnorm(n, 0, 1) # noise
# bind into matrix
X <- as.matrix(cbind(X1, X2, X3, X4))
# generate some data
# coefficients
betas <- c(1, 1, 1, 0)
# deterministic component
deterministic <- 1*(X1) + 1*(X2) + 1*(X3)
# generate outcome with logistic error
Y  <- deterministic + rlogis(n, 0, 1)
# thresholds for continuous outcome
cuts <- quantile(Y, c(0, 0.25, 0.75, 1))
# discretize outcome into ordered classes 1, 2, 3
Y  <- as.numeric(cut(Y, breaks = cuts, include.lowest = TRUE))
# compute the true probabilities
real_prob                       <- cbind(logistic(cuts[2] - deterministic) - 0,
logistic(cuts[3] - deterministic) - logistic(cuts[2]-deterministic),
1 - logistic(cuts[3]-deterministic))
# column names
colnames(real_prob) <- c("Class 1", "Class 2", "Class 3")
# 1. estimate ordered forest
orf_fit <- orf(X,Y)
# predict ordered probabilities
orf_pred <- predict(orf_fit)$forestPredictions
# compute MSE (in-sample)
orf_mse <- mean((rowSums((real_prob - orf_pred)^2)/3))
# 2. estimate ordered logit
ologit_fit <- polr(as.factor(Y) ~ .,  data = as.data.frame(cbind(Y,X)))
# predict ordered probabilities
ologit_pred <- predict(ologit_fit, type = "probs")
# compute MSE (in-sample)
ologit_mse <- mean((rowSums((real_prob - ologit_pred)^2)/3))
# compute true marginal effects
# X1 continuous (marginal change)
real_me_x1 <- cbind((0                                               - dlogis(cuts[2] - cbind(X1, X2, X3, X4)%*%betas))*betas[1],
(dlogis(cuts[2] - cbind(X1, X2, X3, X4)%*%betas) - dlogis(cuts[3] - cbind(X1, X2, X3, X4)%*%betas))*betas[1],
(dlogis(cuts[3] - cbind(X1, X2, X3, X4)%*%betas) -                                               0)*betas[1])
# take the mean
real_me_x1 <- colMeans(real_me_x1)
# X2 categorical (discrete change)
real_me_x2 <- (cbind(logistic(cuts[2] - cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas) - logistic(cuts[2]-cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas))
-
cbind(logistic(cuts[2] - cbind(X1, floor(mean(X2)), X3, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, floor(mean(X2)), X3, X4)%*%betas) - logistic(cuts[2]-cbind(X1, floor(mean(X2)), X3, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, floor(mean(X2)), X3, X4)%*%betas)))
# take the mean
real_me_x2 <- colMeans(real_me_x2)
# X3 binary (discrete change)
real_me_x3 <- (cbind(logistic(cuts[2] - cbind(X1, X2, 1, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, X2, 1, X4)%*%betas) - logistic(cuts[2]-cbind(X1, X2, 1, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, X2, 1, X4)%*%betas))
-
cbind(logistic(cuts[2] - cbind(X1, X2, 0, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, X2, 0, X4)%*%betas) - logistic(cuts[2]-cbind(X1, X2, 0, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, X2, 0, X4)%*%betas)))
# take the mean
real_me_x3 <- colMeans(real_me_x3)
# combine everything together
real_me <- rbind(real_me_x1, real_me_x2, real_me_x3, rep(0,3))
colnames(real_me) <- c("Class 1", "Class 2", "Class 3")
rownames(real_me) <- c("X1", "X2", "X3", "X4")
# 1. estimate orf marginal effects
orf_me <- margins(orf_fit)
# 2. estimate ologit marginal effects
ologit_me <- ocME(ologit_fit)$out
# compare the three
round(real_me, 3)
round(orf_me$MarginalEffects, 3)
ologit_me$ME.all
# libraries
library(orf)
library(psych)
library(MASS)
library(erer)
# set seed for replicability
set.seed(1)
# number of observations
n  <- 500
# various covariates
X1 <- rnorm(n, 1, 1) # continuous
X2 <- rbinom(n, 5, 0.5)
#X2 <- rpois(n, 1) # categorical
X3 <- rbinom(n, 1, 0.5) # dummy
X4 <- rnorm(n, 0, 1) # noise
# bind into matrix
X <- as.matrix(cbind(X1, X2, X3, X4))
# generate some data
# coefficients
betas <- c(1, 1, 1, 0)
# deterministic component
deterministic <- 1*(X1) + 1*(X2) + 1*(X3)
# generate outcome with logistic error
Y  <- deterministic + rlogis(n, 0, 1)
# thresholds for continuous outcome
cuts <- quantile(Y, c(0, 1/3, 2/3, 1))
# discretize outcome into ordered classes 1, 2, 3
Y  <- as.numeric(cut(Y, breaks = cuts, include.lowest = TRUE))
# compute the true probabilities
real_prob                       <- cbind(logistic(cuts[2] - deterministic) - 0,
logistic(cuts[3] - deterministic) - logistic(cuts[2]-deterministic),
1 - logistic(cuts[3]-deterministic))
# column names
colnames(real_prob) <- c("Class 1", "Class 2", "Class 3")
# 1. estimate ordered forest
orf_fit <- orf(X,Y)
# predict ordered probabilities
orf_pred <- predict(orf_fit)$forestPredictions
# compute MSE (in-sample)
orf_mse <- mean((rowSums((real_prob - orf_pred)^2)/3))
# 2. estimate ordered logit
ologit_fit <- polr(as.factor(Y) ~ .,  data = as.data.frame(cbind(Y,X)))
# predict ordered probabilities
ologit_pred <- predict(ologit_fit, type = "probs")
# compute MSE (in-sample)
ologit_mse <- mean((rowSums((real_prob - ologit_pred)^2)/3))
# compute true marginal effects
# X1 continuous (marginal change)
real_me_x1 <- cbind((0                                               - dlogis(cuts[2] - cbind(X1, X2, X3, X4)%*%betas))*betas[1],
(dlogis(cuts[2] - cbind(X1, X2, X3, X4)%*%betas) - dlogis(cuts[3] - cbind(X1, X2, X3, X4)%*%betas))*betas[1],
(dlogis(cuts[3] - cbind(X1, X2, X3, X4)%*%betas) -                                               0)*betas[1])
# take the mean
real_me_x1 <- colMeans(real_me_x1)
# X2 categorical (discrete change)
real_me_x2 <- (cbind(logistic(cuts[2] - cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas) - logistic(cuts[2]-cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas))
-
cbind(logistic(cuts[2] - cbind(X1, floor(mean(X2)), X3, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, floor(mean(X2)), X3, X4)%*%betas) - logistic(cuts[2]-cbind(X1, floor(mean(X2)), X3, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, floor(mean(X2)), X3, X4)%*%betas)))
# take the mean
real_me_x2 <- colMeans(real_me_x2)
# X3 binary (discrete change)
real_me_x3 <- (cbind(logistic(cuts[2] - cbind(X1, X2, 1, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, X2, 1, X4)%*%betas) - logistic(cuts[2]-cbind(X1, X2, 1, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, X2, 1, X4)%*%betas))
-
cbind(logistic(cuts[2] - cbind(X1, X2, 0, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, X2, 0, X4)%*%betas) - logistic(cuts[2]-cbind(X1, X2, 0, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, X2, 0, X4)%*%betas)))
# take the mean
real_me_x3 <- colMeans(real_me_x3)
# combine everything together
real_me <- rbind(real_me_x1, real_me_x2, real_me_x3, rep(0,3))
colnames(real_me) <- c("Class 1", "Class 2", "Class 3")
rownames(real_me) <- c("X1", "X2", "X3", "X4")
# 1. estimate orf marginal effects
orf_me <- margins(orf_fit)
# 2. estimate ologit marginal effects
ologit_me <- ocME(ologit_fit)$out
# compare the three
round(real_me, 3)
round(orf_me$MarginalEffects, 3)
ologit_me$ME.all
# compute the real probabilities and real marginal effects for the example data
# libraries
library(orf)
library(psych)
library(MASS)
library(erer)
# set seed for replicability
set.seed(1)
# number of observations
n  <- 500
# various covariates
X1 <- rnorm(n, 1, 1) # continuous
X2 <- rbinom(n, 5, 0.5)
#X2 <- rpois(n, 1) # categorical
X3 <- rbinom(n, 1, 0.5) # dummy
X4 <- rnorm(n, 0, 1) # noise
# bind into matrix
X <- as.matrix(cbind(X1, X2, X3, X4))
# generate some data
# coefficients
betas <- c(1, 1, 1, 0)
# deterministic component
deterministic <- 1*(X1)^2 + 1*exp(X2) + 1*(X3)
# generate outcome with logistic error
Y  <- deterministic + rlogis(n, 0, 1)
# thresholds for continuous outcome
cuts <- quantile(Y, c(0, 1/3, 2/3, 1))
# discretize outcome into ordered classes 1, 2, 3
Y  <- as.numeric(cut(Y, breaks = cuts, include.lowest = TRUE))
# compute the true probabilities
real_prob                       <- cbind(logistic(cuts[2] - deterministic) - 0,
logistic(cuts[3] - deterministic) - logistic(cuts[2]-deterministic),
1 - logistic(cuts[3]-deterministic))
# column names
colnames(real_prob) <- c("Class 1", "Class 2", "Class 3")
# 1. estimate ordered forest
orf_fit <- orf(X,Y)
# predict ordered probabilities
orf_pred <- predict(orf_fit)$forestPredictions
# compute MSE (in-sample)
orf_mse <- mean((rowSums((real_prob - orf_pred)^2)/3))
# 2. estimate ordered logit
ologit_fit <- polr(as.factor(Y) ~ .,  data = as.data.frame(cbind(Y,X)))
# predict ordered probabilities
ologit_pred <- predict(ologit_fit, type = "probs")
# compute MSE (in-sample)
ologit_mse <- mean((rowSums((real_prob - ologit_pred)^2)/3))
# compute true marginal effects
# X1 continuous (marginal change)
real_me_x1 <- cbind((0                                               - dlogis(cuts[2] - cbind(X1, X2, X3, X4)%*%betas))*betas[1],
(dlogis(cuts[2] - cbind(X1, X2, X3, X4)%*%betas) - dlogis(cuts[3] - cbind(X1, X2, X3, X4)%*%betas))*betas[1],
(dlogis(cuts[3] - cbind(X1, X2, X3, X4)%*%betas) -                                               0)*betas[1])
# take the mean
real_me_x1 <- colMeans(real_me_x1)
# X2 categorical (discrete change)
real_me_x2 <- (cbind(logistic(cuts[2] - cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas) - logistic(cuts[2]-cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas))
-
cbind(logistic(cuts[2] - cbind(X1, floor(mean(X2)), X3, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, floor(mean(X2)), X3, X4)%*%betas) - logistic(cuts[2]-cbind(X1, floor(mean(X2)), X3, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, floor(mean(X2)), X3, X4)%*%betas)))
# take the mean
real_me_x2 <- colMeans(real_me_x2)
# X3 binary (discrete change)
real_me_x3 <- (cbind(logistic(cuts[2] - cbind(X1, X2, 1, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, X2, 1, X4)%*%betas) - logistic(cuts[2]-cbind(X1, X2, 1, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, X2, 1, X4)%*%betas))
-
cbind(logistic(cuts[2] - cbind(X1, X2, 0, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, X2, 0, X4)%*%betas) - logistic(cuts[2]-cbind(X1, X2, 0, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, X2, 0, X4)%*%betas)))
# take the mean
real_me_x3 <- colMeans(real_me_x3)
# combine everything together
real_me <- rbind(real_me_x1, real_me_x2, real_me_x3, rep(0,3))
colnames(real_me) <- c("Class 1", "Class 2", "Class 3")
rownames(real_me) <- c("X1", "X2", "X3", "X4")
# 1. estimate orf marginal effects
orf_me <- margins(orf_fit)
# 2. estimate ologit marginal effects
ologit_me <- ocME(ologit_fit)$out
# compare the three
round(real_me, 3)
round(orf_me$MarginalEffects, 3)
ologit_me$ME.all
# compute the real probabilities and real marginal effects for the example data
# libraries
library(orf)
library(psych)
library(MASS)
library(erer)
# set seed for replicability
set.seed(1)
# number of observations
n  <- 500
# various covariates
X1 <- rnorm(n, 1, 1) # continuous
X2 <- rbinom(n, 5, 0.5)
#X2 <- rpois(n, 1) # categorical
X3 <- rbinom(n, 1, 0.5) # dummy
X4 <- rnorm(n, 0, 1) # noise
# bind into matrix
X <- as.matrix(cbind(X1, X2, X3, X4))
# generate some data
# coefficients
betas <- c(1, 1, 1, 0)
# deterministic component
deterministic <- 1*(X1)^2 + 1*(X2) + 1*(X3)
# generate outcome with logistic error
Y  <- deterministic + rlogis(n, 0, 1)
# thresholds for continuous outcome
cuts <- quantile(Y, c(0, 1/3, 2/3, 1))
# discretize outcome into ordered classes 1, 2, 3
Y  <- as.numeric(cut(Y, breaks = cuts, include.lowest = TRUE))
# compute the true probabilities
real_prob                       <- cbind(logistic(cuts[2] - deterministic) - 0,
logistic(cuts[3] - deterministic) - logistic(cuts[2]-deterministic),
1 - logistic(cuts[3]-deterministic))
# column names
colnames(real_prob) <- c("Class 1", "Class 2", "Class 3")
# 1. estimate ordered forest
orf_fit <- orf(X,Y)
# predict ordered probabilities
orf_pred <- predict(orf_fit)$forestPredictions
# compute MSE (in-sample)
orf_mse <- mean((rowSums((real_prob - orf_pred)^2)/3))
# 2. estimate ordered logit
ologit_fit <- polr(as.factor(Y) ~ .,  data = as.data.frame(cbind(Y,X)))
# predict ordered probabilities
ologit_pred <- predict(ologit_fit, type = "probs")
# compute MSE (in-sample)
ologit_mse <- mean((rowSums((real_prob - ologit_pred)^2)/3))
# compute true marginal effects
# X1 continuous (marginal change)
real_me_x1 <- cbind((0                                               - dlogis(cuts[2] - cbind(X1, X2, X3, X4)%*%betas))*betas[1],
(dlogis(cuts[2] - cbind(X1, X2, X3, X4)%*%betas) - dlogis(cuts[3] - cbind(X1, X2, X3, X4)%*%betas))*betas[1],
(dlogis(cuts[3] - cbind(X1, X2, X3, X4)%*%betas) -                                               0)*betas[1])
# take the mean
real_me_x1 <- colMeans(real_me_x1)
# X2 categorical (discrete change)
real_me_x2 <- (cbind(logistic(cuts[2] - cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas) - logistic(cuts[2]-cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, ceiling(mean(X2)), X3, X4)%*%betas))
-
cbind(logistic(cuts[2] - cbind(X1, floor(mean(X2)), X3, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, floor(mean(X2)), X3, X4)%*%betas) - logistic(cuts[2]-cbind(X1, floor(mean(X2)), X3, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, floor(mean(X2)), X3, X4)%*%betas)))
# take the mean
real_me_x2 <- colMeans(real_me_x2)
# X3 binary (discrete change)
real_me_x3 <- (cbind(logistic(cuts[2] - cbind(X1, X2, 1, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, X2, 1, X4)%*%betas) - logistic(cuts[2]-cbind(X1, X2, 1, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, X2, 1, X4)%*%betas))
-
cbind(logistic(cuts[2] - cbind(X1, X2, 0, X4)%*%betas) - 0,
logistic(cuts[3] - cbind(X1, X2, 0, X4)%*%betas) - logistic(cuts[2]-cbind(X1, X2, 0, X4)%*%betas),
1 - logistic(cuts[3]-cbind(X1, X2, 0, X4)%*%betas)))
# take the mean
real_me_x3 <- colMeans(real_me_x3)
# combine everything together
real_me <- rbind(real_me_x1, real_me_x2, real_me_x3, rep(0,3))
colnames(real_me) <- c("Class 1", "Class 2", "Class 3")
rownames(real_me) <- c("X1", "X2", "X3", "X4")
# 1. estimate orf marginal effects
orf_me <- margins(orf_fit)
# 2. estimate ologit marginal effects
ologit_me <- ocME(ologit_fit)$out
# compare the three
round(real_me, 3)
round(orf_me$MarginalEffects, 3)
ologit_me$ME.all
# ologit with another package
# estimate ologit
# ologit <- ologit.reg(Y ~ . , data = as.data.frame(cbind(Y,X)))
# summary(ologit)
# ologit_betas <- ologit$coefficients[1:4]
# ologit_me <- margins.oglmx(ologit, atmeans = FALSE, AME = TRUE)
# ologit_me
library(devtools)
document()
check()
document()
check()
document()
check()
library(orf)
check()
library(orf)
document()
check()
library(orf)
# load example data
data(odata)
# specify response and covariates
Y <- odata[, 1]
X <- odata[, -1]
# estimate Ordered Forestset.seed(123)
#' orf <- orf(X, Y, num.trees = 2000, mtry = 3, min.node.size = 10,
#'  replace = TRUE, sample.fraction = 1, honesty = FALSE,
#'  honesty.fraction = 0, inference = FALSE, importance = FALSE)
# load example data
data(odata)
# specify response and covariates
Y <- odata[, 1]
X <- odata[, -1]
orf <- orf(X, Y, num.trees = 2000, mtry = 3, min.node.size = 10,
replace = TRUE, sample.fraction = 1, honesty = FALSE,
honesty.fraction = 0, inference = FALSE, importance = FALSE)
document()
check()
library(orf)
data(odata)
Y <- odata[, 1]
X <- odata[, -1]
orf <- orf(X, Y, num.trees = 2000, mtry = 3, min.node.size = 10,
replace = TRUE, sample.fraction = 1, honesty = FALSE,
honesty.fraction = 0, inference = FALSE, importance = FALSE)
orf
summary(orf)
document()
check()
library(orf)
data(odata)
Y <- odata[, 1]
X <- odata[, -1]
set.seed(123)
orf <- orf(X, Y, num.trees = 2000, mtry = 3, min.node.size = 10,
replace = TRUE, sample.fraction = 1, honesty = FALSE,  honesty.fraction = 0, inference = FALSE, importance = FALSE)
summary(orf)
