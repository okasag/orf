# generate stars (thanks to:
# http://myowelt.blogspot.com/2008/04/beautiful-correlation-tables-in-r.html)
stars <- ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .001, "***",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .01, "** ",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .05, "*  ", "   ")))
# print estimates for each category iteratively
output_matrix[1, 1] <- as.numeric(x$out[[cat_idx]][var_idx, 1])
output_matrix[1, 2] <- as.numeric(x$out[[cat_idx]][var_idx, 2])
output_matrix[1, 3] <- as.numeric(x$out[[cat_idx]][var_idx, 3])
output_matrix[1, 4] <- as.numeric(x$out[[cat_idx]][var_idx, 4])
cat("                 |  ", cat_idx, "  |  ") # prit out the categories
cat(format(sprintf("% .4f", round(output_matrix, 4)), width = 10), stars, "  |  ") # print out the estimates
cat("\n") # break the line
}
}
cat("--------------------------------------------------------------------", "\n")
cat("Significance levels correspond to: *** .< 0.01, ** .< 0.05, * .< 0.1 \n")
cat("--------------------------------------------------------------------", "\n")
}
ologit_output(me_ologit)
ologit_output <- function(x) {
output_matrix <- matrix(NA, nrow = 1, ncol = 4)
cat("Ologit Marginal Effects: \n\n")
cat("--------------------------------------------------------------------", "\n")
for (var_idx in 1:nrow(x$out$ME.1)) {
cat(rownames(x$out$ME.1)[var_idx], "\n")
cat("                    Cat ", "    Effect", " StdDev", " tValue ", "pValue", "     ", "\n")
for (cat_idx in 1:(length(x$out)-1)) {
# generate stars (thanks to:
# http://myowelt.blogspot.com/2008/04/beautiful-correlation-tables-in-r.html)
stars <- ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .001, "***",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .01, "** ",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .05, "*  ", "   ")))
# print estimates for each category iteratively
output_matrix[1, 1] <- as.numeric(x$out[[cat_idx]][var_idx, 1])
output_matrix[1, 2] <- as.numeric(x$out[[cat_idx]][var_idx, 2])
output_matrix[1, 3] <- as.numeric(x$out[[cat_idx]][var_idx, 3])
output_matrix[1, 4] <- as.numeric(x$out[[cat_idx]][var_idx, 4])
cat("                 |  ", cat_idx, "  |  ") # prit out the categories
cat(format(sprintf("%05d.4f", round(output_matrix, 4)), width = 10), stars, "  |  ") # print out the estimates
cat("\n") # break the line
}
}
cat("--------------------------------------------------------------------", "\n")
cat("Significance levels correspond to: *** .< 0.01, ** .< 0.05, * .< 0.1 \n")
cat("--------------------------------------------------------------------", "\n")
}
ologit_output(me_ologit)
ologit_output <- function(x) {
output_matrix <- matrix(NA, nrow = 1, ncol = 4)
cat("Ologit Marginal Effects: \n\n")
cat("--------------------------------------------------------------------", "\n")
for (var_idx in 1:nrow(x$out$ME.1)) {
cat(rownames(x$out$ME.1)[var_idx], "\n")
cat("                    Cat ", "    Effect", " StdDev", " tValue ", "pValue", "     ", "\n")
for (cat_idx in 1:(length(x$out)-1)) {
# generate stars (thanks to:
# http://myowelt.blogspot.com/2008/04/beautiful-correlation-tables-in-r.html)
stars <- ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .001, "***",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .01, "** ",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .05, "*  ", "   ")))
# print estimates for each category iteratively
output_matrix[1, 1] <- as.numeric(x$out[[cat_idx]][var_idx, 1])
output_matrix[1, 2] <- as.numeric(x$out[[cat_idx]][var_idx, 2])
output_matrix[1, 3] <- as.numeric(x$out[[cat_idx]][var_idx, 3])
output_matrix[1, 4] <- as.numeric(x$out[[cat_idx]][var_idx, 4])
cat("                 |  ", cat_idx, "  |  ") # prit out the categories
cat(format(sprintf("%05s.4f", round(output_matrix, 4)), width = 10), stars, "  |  ") # print out the estimates
cat("\n") # break the line
}
}
cat("--------------------------------------------------------------------", "\n")
cat("Significance levels correspond to: *** .< 0.01, ** .< 0.05, * .< 0.1 \n")
cat("--------------------------------------------------------------------", "\n")
}
ologit_output(me_ologit)
ologit_output <- function(x) {
output_matrix <- matrix(NA, nrow = 1, ncol = 4)
cat("Ologit Marginal Effects: \n\n")
cat("--------------------------------------------------------------------", "\n")
for (var_idx in 1:nrow(x$out$ME.1)) {
cat(rownames(x$out$ME.1)[var_idx], "\n")
cat("                    Cat ", "    Effect", " StdDev", " tValue ", "pValue", "     ", "\n")
for (cat_idx in 1:(length(x$out)-1)) {
# generate stars (thanks to:
# http://myowelt.blogspot.com/2008/04/beautiful-correlation-tables-in-r.html)
stars <- ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .001, "***",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .01, "** ",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .05, "*  ", "   ")))
# print estimates for each category iteratively
output_matrix[1, 1] <- as.numeric(x$out[[cat_idx]][var_idx, 1])
output_matrix[1, 2] <- as.numeric(x$out[[cat_idx]][var_idx, 2])
output_matrix[1, 3] <- as.numeric(x$out[[cat_idx]][var_idx, 3])
output_matrix[1, 4] <- as.numeric(x$out[[cat_idx]][var_idx, 4])
cat("                 |  ", cat_idx, "  |  ") # prit out the categories
cat(format(sprintf("%05.4f", round(output_matrix, 4)), width = 10), stars, "  |  ") # print out the estimates
cat("\n") # break the line
}
}
cat("--------------------------------------------------------------------", "\n")
cat("Significance levels correspond to: *** .< 0.01, ** .< 0.05, * .< 0.1 \n")
cat("--------------------------------------------------------------------", "\n")
}
ologit_output(me_ologit)
ologit_output <- function(x) {
output_matrix <- matrix(NA, nrow = 1, ncol = 4)
cat("Ologit Marginal Effects: \n\n")
cat("--------------------------------------------------------------------", "\n")
for (var_idx in 1:nrow(x$out$ME.1)) {
cat(rownames(x$out$ME.1)[var_idx], "\n")
cat("                    Cat ", "    Effect", " StdDev", " tValue ", "pValue", "     ", "\n")
for (cat_idx in 1:(length(x$out)-1)) {
# generate stars (thanks to:
# http://myowelt.blogspot.com/2008/04/beautiful-correlation-tables-in-r.html)
stars <- ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .001, "***",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .01, "** ",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .05, "*  ", "   ")))
# print estimates for each category iteratively
output_matrix[1, 1] <- as.numeric(x$out[[cat_idx]][var_idx, 1])
output_matrix[1, 2] <- as.numeric(x$out[[cat_idx]][var_idx, 2])
output_matrix[1, 3] <- as.numeric(x$out[[cat_idx]][var_idx, 3])
output_matrix[1, 4] <- as.numeric(x$out[[cat_idx]][var_idx, 4])
cat("                 |  ", cat_idx, "  |  ") # prit out the categories
cat(format(sprintf("%8s.4f", round(output_matrix, 4)), width = 10), stars, "  |  ") # print out the estimates
cat("\n") # break the line
}
}
cat("--------------------------------------------------------------------", "\n")
cat("Significance levels correspond to: *** .< 0.01, ** .< 0.05, * .< 0.1 \n")
cat("--------------------------------------------------------------------", "\n")
}
ologit_output(me_ologit)
ologit_output <- function(x) {
output_matrix <- matrix(NA, nrow = 1, ncol = 4)
cat("Ologit Marginal Effects: \n\n")
cat("--------------------------------------------------------------------", "\n")
for (var_idx in 1:nrow(x$out$ME.1)) {
cat(rownames(x$out$ME.1)[var_idx], "\n")
cat("                    Cat ", "    Effect", " StdDev", " tValue ", "pValue", "     ", "\n")
for (cat_idx in 1:(length(x$out)-1)) {
# generate stars (thanks to:
# http://myowelt.blogspot.com/2008/04/beautiful-correlation-tables-in-r.html)
stars <- ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .001, "***",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .01, "** ",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .05, "*  ", "   ")))
# print estimates for each category iteratively
output_matrix[1, 1] <- as.numeric(x$out[[cat_idx]][var_idx, 1])
output_matrix[1, 2] <- as.numeric(x$out[[cat_idx]][var_idx, 2])
output_matrix[1, 3] <- as.numeric(x$out[[cat_idx]][var_idx, 3])
output_matrix[1, 4] <- as.numeric(x$out[[cat_idx]][var_idx, 4])
cat("                 |  ", cat_idx, "  |  ") # prit out the categories
cat(format(sprintf("%8.4f", round(output_matrix, 4)), width = 10), stars, "  |  ") # print out the estimates
cat("\n") # break the line
}
}
cat("--------------------------------------------------------------------", "\n")
cat("Significance levels correspond to: *** .< 0.01, ** .< 0.05, * .< 0.1 \n")
cat("--------------------------------------------------------------------", "\n")
}
ologit_output(me_ologit)
ologit_output <- function(x) {
output_matrix <- matrix(NA, nrow = 1, ncol = 4)
cat("Ologit Marginal Effects: \n\n")
cat("--------------------------------------------------------------------", "\n")
for (var_idx in 1:nrow(x$out$ME.1)) {
cat(rownames(x$out$ME.1)[var_idx], "\n")
cat("                    Cat ", "    Effect", " StdDev", " tValue ", "pValue", "     ", "\n")
for (cat_idx in 1:(length(x$out)-1)) {
# generate stars (thanks to:
# http://myowelt.blogspot.com/2008/04/beautiful-correlation-tables-in-r.html)
stars <- ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .001, "***",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .01, "** ",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .05, "*  ", "   ")))
# print estimates for each category iteratively
output_matrix[1, 1] <- as.numeric(x$out[[cat_idx]][var_idx, 1])
output_matrix[1, 2] <- as.numeric(x$out[[cat_idx]][var_idx, 2])
output_matrix[1, 3] <- as.numeric(x$out[[cat_idx]][var_idx, 3])
output_matrix[1, 4] <- as.numeric(x$out[[cat_idx]][var_idx, 4])
cat("                 |  ", cat_idx, "  |  ") # prit out the categories
cat(format(sprintf("%8.4f", round(output_matrix, 4)), width = 8), stars, "  |  ") # print out the estimates
cat("\n") # break the line
}
}
cat("--------------------------------------------------------------------", "\n")
cat("Significance levels correspond to: *** .< 0.01, ** .< 0.05, * .< 0.1 \n")
cat("--------------------------------------------------------------------", "\n")
}
ologit_output(me_ologit)
ologit_output <- function(x) {
output_matrix <- matrix(NA, nrow = 1, ncol = 4)
cat("Ologit Marginal Effects: \n\n")
cat("--------------------------------------------------------------------", "\n")
for (var_idx in 1:nrow(x$out$ME.1)) {
cat(rownames(x$out$ME.1)[var_idx], "\n")
cat("                    Cat ", "    Effect", " StdDev", " tValue ", "pValue", "     ", "\n")
for (cat_idx in 1:(length(x$out)-1)) {
# generate stars (thanks to:
# http://myowelt.blogspot.com/2008/04/beautiful-correlation-tables-in-r.html)
stars <- ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .001, "***",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .01, "** ",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .05, "*  ", "   ")))
# print estimates for each category iteratively
output_matrix[1, 1] <- as.numeric(x$out[[cat_idx]][var_idx, 1])
output_matrix[1, 2] <- as.numeric(x$out[[cat_idx]][var_idx, 2])
output_matrix[1, 3] <- as.numeric(x$out[[cat_idx]][var_idx, 3])
output_matrix[1, 4] <- as.numeric(x$out[[cat_idx]][var_idx, 4])
cat("                 |  ", cat_idx, "  |  ") # prit out the categories
cat(format(sprintf("%8.4f", round(output_matrix, 4)), width = 9), stars, "  |  ") # print out the estimates
cat("\n") # break the line
}
}
cat("--------------------------------------------------------------------", "\n")
cat("Significance levels correspond to: *** .< 0.01, ** .< 0.05, * .< 0.1 \n")
cat("--------------------------------------------------------------------", "\n")
}
ologit_output(me_ologit)
ologit_output <- function(x) {
output_matrix <- matrix(NA, nrow = 1, ncol = 4)
cat("Ologit Marginal Effects: \n\n")
cat("--------------------------------------------------------------------", "\n")
for (var_idx in 1:nrow(x$out$ME.1)) {
cat(rownames(x$out$ME.1)[var_idx], "\n")
cat("                    Cat ", "    Effect", " StdDev", " tValue ", "pValue", "     ", "\n")
for (cat_idx in 1:(length(x$out)-1)) {
# generate stars (thanks to:
# http://myowelt.blogspot.com/2008/04/beautiful-correlation-tables-in-r.html)
stars <- ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .001, "***",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .01, "** ",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .05, "*  ", "   ")))
# print estimates for each category iteratively
output_matrix[1, 1] <- as.numeric(x$out[[cat_idx]][var_idx, 1])
output_matrix[1, 2] <- as.numeric(x$out[[cat_idx]][var_idx, 2])
output_matrix[1, 3] <- as.numeric(x$out[[cat_idx]][var_idx, 3])
output_matrix[1, 4] <- as.numeric(x$out[[cat_idx]][var_idx, 4])
cat("                 |  ", cat_idx, "  |  ") # prit out the categories
cat(format(sprintf("%8.4f", round(output_matrix, 4)), width = 10), stars, "  |  ") # print out the estimates
cat("\n") # break the line
}
}
cat("--------------------------------------------------------------------", "\n")
cat("Significance levels correspond to: *** .< 0.01, ** .< 0.05, * .< 0.1 \n")
cat("--------------------------------------------------------------------", "\n")
}
ologit_output(me_ologit)
ologit_output <- function(x) {
output_matrix <- matrix(NA, nrow = 1, ncol = 4)
cat("Ologit Marginal Effects: \n\n")
cat("-----------------------------------------------------------------------------", "\n")
for (var_idx in 1:nrow(x$out$ME.1)) {
cat(rownames(x$out$ME.1)[var_idx], "\n")
cat("                    Cat ", "    Effect", " StdDev", " tValue ", "pValue", "     ", "\n")
for (cat_idx in 1:(length(x$out)-1)) {
# generate stars (thanks to:
# http://myowelt.blogspot.com/2008/04/beautiful-correlation-tables-in-r.html)
stars <- ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .001, "***",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .01, "** ",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .05, "*  ", "   ")))
# print estimates for each category iteratively
output_matrix[1, 1] <- as.numeric(x$out[[cat_idx]][var_idx, 1])
output_matrix[1, 2] <- as.numeric(x$out[[cat_idx]][var_idx, 2])
output_matrix[1, 3] <- as.numeric(x$out[[cat_idx]][var_idx, 3])
output_matrix[1, 4] <- as.numeric(x$out[[cat_idx]][var_idx, 4])
cat("                 |  ", cat_idx, "  |  ") # prit out the categories
cat(format(sprintf("%8.4f", round(output_matrix, 4)), width = 10), stars, "  |  ") # print out the estimates
cat("\n") # break the line
}
}
cat("------------------------------------------------------------------------------", "\n")
cat("Significance levels correspond to: *** .< 0.01, ** .< 0.05, * .< 0.1 \n")
cat("------------------------------------------------------------------------------", "\n")
}
ologit_output(me_ologit)
ologit_output <- function(x) {
output_matrix <- matrix(NA, nrow = 1, ncol = 4)
cat("Ologit Marginal Effects: \n\n")
cat("---------------------------------------------------------------------------------", "\n")
for (var_idx in 1:nrow(x$out$ME.1)) {
cat(rownames(x$out$ME.1)[var_idx], "\n")
cat("                    Cat ", "    Effect", " StdDev", " tValue ", "pValue", "     ", "\n")
for (cat_idx in 1:(length(x$out)-1)) {
# generate stars (thanks to:
# http://myowelt.blogspot.com/2008/04/beautiful-correlation-tables-in-r.html)
stars <- ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .001, "***",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .01, "** ",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .05, "*  ", "   ")))
# print estimates for each category iteratively
output_matrix[1, 1] <- as.numeric(x$out[[cat_idx]][var_idx, 1])
output_matrix[1, 2] <- as.numeric(x$out[[cat_idx]][var_idx, 2])
output_matrix[1, 3] <- as.numeric(x$out[[cat_idx]][var_idx, 3])
output_matrix[1, 4] <- as.numeric(x$out[[cat_idx]][var_idx, 4])
cat("                 |  ", cat_idx, "  |  ") # prit out the categories
cat(format(sprintf("%8.4f", round(output_matrix, 4)), width = 10), stars, "  |  ") # print out the estimates
cat("\n") # break the line
}
}
cat("---------------------------------------------------------------------------------", "\n")
cat("Significance levels correspond to: *** .< 0.01, ** .< 0.05, * .< 0.1 \n")
cat("---------------------------------------------------------------------------------", "\n")
}
ologit_output(me_ologit)
ologit_output <- function(x) {
output_matrix <- matrix(NA, nrow = 1, ncol = 4)
cat("Ologit Marginal Effects: \n\n")
cat("---------------------------------------------------------------------------------", "\n")
for (var_idx in 1:nrow(x$out$ME.1)) {
cat(rownames(x$out$ME.1)[var_idx], "\n")
cat("                    Cat ", "     Effect", "    StdDev", "    tValue ", "   pValue", "     ", "\n")
for (cat_idx in 1:(length(x$out)-1)) {
# generate stars (thanks to:
# http://myowelt.blogspot.com/2008/04/beautiful-correlation-tables-in-r.html)
stars <- ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .001, "***",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .01, "** ",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .05, "*  ", "   ")))
# print estimates for each category iteratively
output_matrix[1, 1] <- as.numeric(x$out[[cat_idx]][var_idx, 1])
output_matrix[1, 2] <- as.numeric(x$out[[cat_idx]][var_idx, 2])
output_matrix[1, 3] <- as.numeric(x$out[[cat_idx]][var_idx, 3])
output_matrix[1, 4] <- as.numeric(x$out[[cat_idx]][var_idx, 4])
cat("                 |  ", cat_idx, "  |  ") # prit out the categories
cat(format(sprintf("%8.4f", round(output_matrix, 4)), width = 10), stars, "  |  ") # print out the estimates
cat("\n") # break the line
}
}
cat("---------------------------------------------------------------------------------", "\n")
cat("Significance levels correspond to: *** .< 0.01, ** .< 0.05, * .< 0.1 \n")
cat("---------------------------------------------------------------------------------", "\n")
}
ologit_output(me_ologit)
devtools::document()
devtools::check()
library(orf)
# load orf
library(orf)
# estimate with polr
library(MASS)
library(erer)
# set wd
setwd("/home/okasag/Documents/HSG/ORF/real_data_app")
# get data
### 1. WINE DATA
load("~/Documents/HSG/ORF/data/winequality_dataset_rdata.Rdata")
# prepare data
dataset$y <- as.numeric(dataset$y)
X <- as.matrix(dataset[, 1:ncol(dataset)-1])
Y <- as.matrix(dataset[, ncol(dataset)])
# prepare parameters
ntree <- 2000
mtry <- ceiling(sqrt(ncol(X)))
nmin <- 5
honesty <- TRUE
inference <- FALSE
margins <- TRUE
# estimate orf in first place
set.seed(3192) # put your birthday here
system.time(
orf_model <- orf(X,Y,ntree,mtry,nmin,honesty,inference,margins))
orf_model$forestInfo$inputs$inference <- TRUE
system.time(
orf_mean_me <- margins(orf_model, eval = "atmean", NULL))
print(orf_mean_me)
# ologit
ologit <- polr(as.ordered(y) ~ ., data = dataset, Hess = TRUE)
# marginal effects for ologit at mean
me_ologit <-ocME(ologit, rev.dum = TRUE, digits = 6)
ologit_output <- function(x) {
output_matrix <- matrix(NA, nrow = 1, ncol = 4)
cat("Ologit Marginal Effects: \n\n")
cat("---------------------------------------------------------------------------------", "\n")
for (var_idx in 1:nrow(x$out$ME.1)) {
cat(rownames(x$out$ME.1)[var_idx], "\n")
cat("                    Cat ", "     Effect", "    StdDev", "    tValue ", "   pValue", "     ", "\n")
for (cat_idx in 1:(length(x$out)-1)) {
# generate stars (thanks to:
# http://myowelt.blogspot.com/2008/04/beautiful-correlation-tables-in-r.html)
stars <- ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .001, "***",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .01, "** ",
ifelse(as.numeric(x$out[[cat_idx]][var_idx, 4]) < .05, "*  ", "   ")))
# print estimates for each category iteratively
output_matrix[1, 1] <- as.numeric(x$out[[cat_idx]][var_idx, 1])
output_matrix[1, 2] <- as.numeric(x$out[[cat_idx]][var_idx, 2])
output_matrix[1, 3] <- as.numeric(x$out[[cat_idx]][var_idx, 3])
output_matrix[1, 4] <- as.numeric(x$out[[cat_idx]][var_idx, 4])
cat("                 |  ", cat_idx, "  |  ") # prit out the categories
cat(format(sprintf("%8.4f", round(output_matrix, 4)), width = 10), stars, "  |  ") # print out the estimates
cat("\n") # break the line
}
}
cat("---------------------------------------------------------------------------------", "\n")
cat("Significance levels correspond to: *** .< 0.01, ** .< 0.05, * .< 0.1 \n")
cat("---------------------------------------------------------------------------------", "\n")
}
ologit_output(me_ologit)
# load orf
library(orf)
# estimate with polr
library(MASS)
library(erer)
# set wd
setwd("/home/okasag/Documents/HSG/ORF/real_data_app")
source("~/Documents/HSG/ORF/real_data_app/marginal_effects/output_logit.R")
source("~/Documents/HSG/ORF/real_data_app/marginal_effects/output_ologit.R")
### 1. WINE DATA
load("~/Documents/HSG/ORF/data/winequality_dataset_rdata.Rdata")
# prepare data
dataset$y <- as.numeric(dataset$y)
X <- as.matrix(dataset[, 1:ncol(dataset)-1])
Y <- as.matrix(dataset[, ncol(dataset)])
# prepare parameters
ntree <- 2000
# prepare parameters
ntree <- 10000
mtry <- ceiling(sqrt(ncol(X)))
nmin <- 5
honesty <- TRUE
inference <- FALSE
margins <- TRUE
# estimate orf in first place
set.seed(3192) # put your birthday here
system.time(
orf_model <- orf(X,Y,ntree,mtry,nmin,honesty,inference,margins))
200/60
orf_model$honestRPS
orf_model$honestMSE
orf_model$marginalEffects
rowSums(orf_model$marginalEffects)
orf_model$forestInfo$inputs$inference <- TRUE
system.time(
orf_mean_me <- margins(orf_model, eval = "atmean", NULL))
print(orf_mean_me)
# ologit
ologit <- polr(as.ordered(y) ~ ., data = dataset, Hess = TRUE)
# marginal effects for ologit at mean
me_ologit <-ocME(ologit, rev.dum = TRUE, digits = 6)
ologit_output(me_ologit)
devtools::document()
devtools::check()
library(orf)
# load orf
library(orf)
# estimate with polr
library(MASS)
library(erer)
# set wd
setwd("/home/okasag/Documents/HSG/ORF/real_data_app")
source("~/Documents/HSG/ORF/real_data_app/marginal_effects/output_ologit.R")
### 1. WINE DATA
load("~/Documents/HSG/ORF/data/winequality_dataset_rdata.Rdata")
# prepare data
dataset$y <- as.numeric(dataset$y)
X <- as.matrix(dataset[, 1:ncol(dataset)-1])
Y <- as.matrix(dataset[, ncol(dataset)])
# prepare parameters
ntree <- 10000
# prepare parameters
ntree <- 2000
mtry <- ceiling(sqrt(ncol(X)))
nmin <- 3
honesty <- TRUE
inference <- FALSE
margins <- TRUE
# estimate orf in first place
set.seed(3192) # put your birthday here
system.time(
orf_model <- orf(X,Y,ntree,mtry,nmin,honesty,inference,margins))
orf_model$forestInfo$inputs$inference <- TRUE
system.time(
orf_mean_me <- margins(orf_model, eval = "atmean", NULL))
print(orf_mean_me)
devtools::document()
devtools::check()
library(orf)
# load orf
library(orf)
# estimate with polr
library(MASS)
library(erer)
# set wd
setwd("/home/okasag/Documents/HSG/ORF/real_data_app")
source("~/Documents/HSG/ORF/real_data_app/marginal_effects/output_ologit.R")
# get data
### 1. WINE DATA
load("~/Documents/HSG/ORF/data/winequality_dataset_rdata.Rdata")
# prepare data
dataset$y <- as.numeric(dataset$y)
X <- as.matrix(dataset[, 1:ncol(dataset)-1])
Y <- as.matrix(dataset[, ncol(dataset)])
# prepare parameters
ntree <- 2000
mtry <- ceiling(sqrt(ncol(X)))
nmin <- 5
honesty <- TRUE
inference <- FALSE
margins <- TRUE
# estimate orf in first place
set.seed(3192) # put your birthday here
system.time(
orf_model <- orf(X,Y,ntree,mtry,nmin,honesty,inference,margins))
orf_model$forestInfo$inputs$inference <- TRUE
system.time(
orf_mean_me <- margins(orf_model, eval = "atmean", NULL))
orf_mean_me
orf_model$marginalEffects
round(orf_model$marginalEffects, 4)
round(orf_mean_me$MarginalEffects, 4)
# ologit
ologit <- polr(as.ordered(y) ~ ., data = dataset, Hess = TRUE)
# marginal effects for ologit at mean
me_ologit <-ocME(ologit, rev.dum = TRUE, digits = 6)
ologit_output(me_ologit)
round(orf_model$marginalEffects, 4)
round(orf_mean_me$MarginalEffects, 4)
round(me_ologit$out$ME.all, 4)
